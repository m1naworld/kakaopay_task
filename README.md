
## 카카오 페이 사전 과제 🏃

### 선택 기술 
- Java
- Springboot
- JPA
- Mysql

<br/>

### 필수 요구 사항
- 아래 API들을 구현합니다. 
  1) 커피메뉴목록조회API
  2) 포인트 충전하기 API
  3) 커피 주문, 결제하기 API
  4) 인기메뉴 목록 조회 API
  
- 작성하신 어플리케이션이 다수의 서버에 다수의 인스턴스로 동작하더라도 기능에 문제가 없도록 설계되어야 합니다.
- 각 기능 및 제약사항에 대한 단위테스트를 반드시 작성합니다.
- 동시성 이슈를 고려하여 구현합니다.
- 데이터 일관성을 고려하여 구현합니다.

<br/>

### DB 구조 
<img width="6000" alt="스크린샷 2023-03-04 오전 4 00 10" src="https://user-images.githubusercontent.com/85235063/222804585-22acd7bd-0df0-480b-b7df-66beab55d66b.png">

<br/>

### API 
<img width="889" alt="스크린샷 2023-03-04 오전 4 44 32" src="https://user-images.githubusercontent.com/85235063/222812631-27c1a273-4583-489d-9530-417690a35d4e.png">

<br/>

### 요구사항 해결 방법
#### 데이터 일관성 측면 
- 메뉴 가격이 변동될 것을 대비해 주문 테이블에 주문 당시 가격 컬럼 추가

#### 인기메뉴 조회 API (최근 7일간 인기있는 메뉴 3개를 조회하는 API)
- 인기메뉴를 조회할 때마다 주문 목록 테이블에서 연산하여 가져오는 것은 비효율적이라 판단
- 인기메뉴 테이블을 따로 만들어 일일 00시마다 스케쥴링을 통해 인기메뉴 연산하여 저장
- 다중 서버일때를 고려하여, SchedulerLock 설정. 여러 서버 중 하나만 스케쥴링이 작동하도록 구현

